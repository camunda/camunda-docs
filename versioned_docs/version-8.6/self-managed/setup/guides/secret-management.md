---
id: secret-management
title: "Managing Secrets in Camunda 8 Self-Managed"
description: "A comprehensive guide on configuring and managing secrets in Camunda 8, including Keycloak, OAuth client secrets, and first-user authentication."
---

# Managing Secrets in Helm Charts

## Overview

This guide provides detailed instructions for configuring and managing secrets when using the official Helm chart. It covers:

- Internal secrets: secrets used by the C8 apps
- External secrets: secrests used for third party configuration
- Secure handling of Kubernetes secrets
- Practical YAML configuration examples, including PostgreSQL, TLS, OAuth clients
- Best practices for upgrades and secret management

---

## Internal Secrets

These secrets are used by Camunda applications, and created and managed by the Helm chart unless explicitly configured.

| **Secret**                           | **Chart Values Key**                                                                                                          | **Purpose**                                                       | **Default Behavior**            |
| ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------- |
| **Keycloak Admin Password**          | `identity.keycloak.auth.existingSecret`, `identity.keycloak.auth.adminPassword`                                               | Admin password for Keycloak (Camunda Identity)                    | Generated by default if not set |
| **Keycloak Management Password**     | `identity.keycloak.auth.existingSecret`, `identity.keycloak.auth.managementPassword`                                          | Internal password for Identity service communication              | Generated by default if not set |
| **Identity First User Password**     | `identity.firstUser.password`, `identity.firstUser.existingSecret`                                                            | Default user password (`demo/demo`)                               | `demo` unless overridden        |
| **OAuth Client Secret (Operate)**    | `global.identity.auth.operate.existingSecret.name`, `global.identity.auth.operate.existingSecret`                             | OAuth client secret for Operate                                   | Generated by default if not set |
| **OAuth Client Secret (Tasklist)**   | `global.identity.auth.tasklist.existingSecret.name`, `global.identity.auth.tasklist.existingSecret`                           | OAuth client secret for Tasklist                                  | Generated by default if not set |
| **OAuth Client Secret (Optimize)**   | `global.identity.auth.optimize.existingSecret.name`, `global.identity.auth.optimize.existingSecret`                           | OAuth client secret for Optimize                                  | Generated by default if not set |
| **OAuth Client Secret (Connectors)** | `global.identity.auth.connectors.existingSecret.name`, `global.identity.auth.connectors.existingSecret`                       | OAuth client secret for Connectors                                | Generated by default if not set |
| **OAuth Client Secret (Console)**    | `global.identity.auth.console.existingSecret.name`, `global.identity.auth.console.existingSecret`                             | OAuth client secret for Console                                   | Generated by default if not set |
| **OAuth Client Secret (Zeebe)**      | `global.identity.auth.zeebe.existingSecret.name`, `global.identity.auth.zeebe.existingSecret`                                 | OAuth client secret for Zeebe                                     | Generated by default if not set |
| **Enterprise License Key**           | `global.license.existingSecret`,`global.license.existingSecretKey`                                                            | Camunda Enterprise License Key                                    | Not set unless provided         |
| **Identity PostgreSQL Password**     | `identityPostgresql.auth.existingSecret`                                                                                      | Password for embedded PostgreSQL used by Identity                 | Generated by default if not set |
| **Keycloak PostgreSQL Password**     | `identityKeycloak.auth.existingSecret`                                                                                        | Password for embedded PostgreSQL used by Keycloak                 | Generated by default if not set |
| **Web Modeler PostgreSQL Password**  | `postgresql.auth.existingSecret`, `postgresql.auth.secretKeys.adminPasswordKey`, `postgresql.auth.secretKeys.userPasswordKey` | Passwords for Web Modeler's embedded PostgreSQL via Bitnami chart | Generated by default if not set |
| **Enterprise License Key**           | `global.license.existingSecret`, `global.license.existingSecretKey`                                                           | Camunda Enterprise License Key                                    | Not set unless provided         |

---

## Disabling Auto-Generated Secrets

By default, the Camunda Helm chart auto-generates secrets like OAuth client passwords on first install. This ensures the platform can start without manual configuration but can lead to issues on upgrades if the secrets are regenerated.

To use only user-defined secrets and prevent regeneration during upgrades:

```yaml
global:
  secrets:
    autoGenerated: false
```

This will stop auto-generating secrets. Ensure:

- All required secrets are created
- The `existingSecretKey` values match the keys in the Kubernetes Secret
- Secrets exist in the correct namespace

---

## External Secrets

These secrets are necessary when integrating Camunda with third-party services.

### External Databases and Mail Services

| **Secret**                           | **Chart Values Key**                                                                                            | **Purpose**                                                     | **Default Behavior**    |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- | ----------------------- |
| **External Database Password**       | `webModeler.restapi.externalDatabase.existingSecret.name`, `webModeler.restapi.externalDatabase.existingSecret` | Password for external PostgreSQL if using an external DB        | Not set unless provided |
| **SMTP Password**                    | `webModeler.restapi.mail.existingSecret.name`, `webModeler.restapi.mail.existingSecret`                         | SMTP credentials for sending email notifications                | Not set unless provided |
| **Connectors Inbound Auth Password** | `connectors.inbound.auth.existingSecret`, `connectors.inbound.auth.existingSecretKey`                           | Basic auth password for Connectors polling Operate              | Not set unless provided |
| **External Elasticsearch Auth**      | `global.elasticsearch.auth.existingSecret`                                                                      | Password for external Elasticsearch authentication (basic auth) | Not set unless provided |
| **External Elasticsearch TLS Cert**  | `global.elasticsearch.tls.existingSecret`                                                                       | TLS certificate for external Elasticsearch over SSL             | Not set unless provided |
| **External OpenSearch Auth**         | `global.opensearch.auth.existingSecret`                                                                         | Password for external OpenSearch authentication (basic auth)    | Not set unless provided |
| **External OpenSearch TLS Cert**     | `global.opensearch.tls.existingSecret`                                                                          | TLS certificate for external OpenSearch over SSL                | Not set unless provided |

---

## Creating Kubernetes Secrets

Secrets may be created manually using the kubectl CLI or defined in Kubernetes manifests. For more examples, see [Create Identity Secrets in the Camunda Docs](https://docs.camunda.io/docs/self-managed/setup/install/#create-identity-secrets).

To create a secret via `kubectl`::

```sh
kubectl create secret generic camunda-secret \
  --from-literal=operate-secret-key=camundapassword\
  --namespace camunda
```

Or using YAML:

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: camunda-secret
  namespace: camunda
type: Opaque
stringData:
  operate-secret-key: "camundapassword"
```

Apply it with:

```sh
kubectl apply -f my-secret.yaml
```

---

### Referencing Secrets in `values.yaml`

To reference a secret in the `values.yaml`, it's recommended to use the `existingSecret.name` and `existingSecretKey`.

```yaml
global:
  identity:
    auth:
      operate:
        existingSecret:
          name: camunda-secret
        existingSecretKey: operate-secret-key
```

---

## TLS Secrets

When Camunda services are exposed via Ingress with TLS, a Kubernetes Secret containing the TLS certificate and private key is typically required. This is especially important when using tools like cert-manager or securing public-facing services.

### Chart Values

The TLS secret can be configured as shown below:

```yaml
global:
  ingress:
    tls:
      enabled: true
      secretName: camunda-tls-secret
```

### TLS Secret Example

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: camunda-tls-secret
  namespace: camunda
annotations:
  cert-manager.io/issuer: "letsencrypt-prod"
type: kubernetes.io/tls
data:
  tls.crt: <base64 encoded cert>
  tls.key: <base64 encoded key>
```

Ensure the secret name is configured in `values.yaml` under `global.ingress.tls.secretName`.

---
