---
id: secret-management
title: "Managing Secrets in Camunda 8 Self-Managed"
description: "A comprehensive guide on configuring and managing secrets in Camunda 8, including Keycloak, OAuth client secrets, and first-user authentication."
---

# Managing Secrets in Helm Charts

## Overview

This guide provides detailed instructions for configuring and managing secrets when using the official Helm chart. It covers:

- Internal secrets: secrets used by the C8 apps
- External secrets: secrests used for third party configuration
- Secure handling of Kubernetes secrets
- Practical YAML configuration examples, including PostgreSQL, TLS, OAuth clients
- Best practices for upgrades and secret management

---

## Internal Secrets

These secrets are used by Camunda applications, and created and managed by the Helm chart unless explicitly configured.

### Identity / Keycloak

| **Secret**                       | **Chart Values Key**                                                                 | **Purpose**                                          | **Default Behavior**            |
| -------------------------------- | ------------------------------------------------------------------------------------ | ---------------------------------------------------- | ------------------------------- |
| **Keycloak Admin Password**      | `identity.keycloak.auth.adminPassword`, `identity.keycloak.auth.existingSecret`      | Admin password for Keycloak (Camunda Identity)       | Generated by default if not set |
| **Keycloak Management Password** | `identity.keycloak.auth.managementPassword`, `identity.keycloak.auth.existingSecret` | Internal password for Identity service communication | Generated by default if not set |
| **Identity First User Password** | `identity.firstUser.password`, `identity.firstUser.existingSecret`                   | Default user password (`demo/demo`)                  | `demo` unless overridden        |

### OAuth Client Secrets

| **Secret**                           | **Chart Values Key**                                                                                    | **Purpose**                                            | **Default Behavior**            |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------ | ------------------------------- |
| **OAuth Client Secret (Operate)**    | `global.identity.auth.operate.existingSecret.name`, `global.identity.auth.operate.existingSecret`       | OAuth client secret for Operate                        | Generated by default if not set |
| **OAuth Client Secret (Tasklist)**   | `global.identity.auth.tasklist.existingSecret.name`, `global.identity.auth.tasklist.existingSecret`     | OAuth client secret for Tasklist                       | Generated by default if not set |
| **OAuth Client Secret (Optimize)**   | `global.identity.auth.optimize.existingSecret.name`, `global.identity.auth.optimize.existingSecret`     | OAuth client secret for Optimize                       | Generated by default if not set |
| **OAuth Client Secret (Connectors)** | `global.identity.auth.connectors.existingSecret.name`, `global.identity.auth.connectors.existingSecret` | OAuth client secret for Connectors                     | Generated by default if not set |
| **OAuth Client Secret (Console)**    | `global.identity.auth.console.existingSecret.name`, `global.identity.auth.console.existingSecret`       | OAuth client secret for Console                        | Generated by default if not set |
| **OAuth Client Secret (Zeebe)**      | `global.identity.auth.zeebe.existingSecret.name`, `global.identity.auth.zeebe.existingSecret`           | OAuth client secret for Zeebeâ€™s internal system client | Generated by default if not set |

### PostgreSQL Credentials

| **Secret**                          | **Chart Values Key**                                                                                                          | **Purpose**                                                       | **Default Behavior**            |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------- |
| **Identity PostgreSQL Password**    | `identityPostgresql.auth.existingSecret`                                                                                      | Password for embedded PostgreSQL used by Identity                 | Generated by default if not set |
| **Keycloak PostgreSQL Password**    | `identityKeycloak.auth.existingSecret`                                                                                        | Password for embedded PostgreSQL used by Keycloak                 | Generated by default if not set |
| **Web Modeler PostgreSQL Password** | `postgresql.auth.existingSecret`, `postgresql.auth.secretKeys.adminPasswordKey`, `postgresql.auth.secretKeys.userPasswordKey` | Passwords for Web Modeler's embedded PostgreSQL via Bitnami chart | Generated by default if not set |

### License Secrets

| **Secret**                 | **Chart Values Key**                                                | **Purpose**                    | **Default Behavior**    |
| -------------------------- | ------------------------------------------------------------------- | ------------------------------ | ----------------------- |
| **Enterprise License Key** | `global.license.existingSecret`, `global.license.existingSecretKey` | Camunda Enterprise License Key | Not set unless provided |

---

## Optional Secrets Based on Configuration

Some secrets are required only in specific configurations. The following are common conditional cases:

- ðŸ”¸ **`webModeler.restapi.externalDatabase.existingSecret`** â€“ If using an external PostgreSQL database.
- ðŸ”¸ **`webModeler.restapi.mail.existingSecret`** â€“ SMTP is enabled for email features.
- ðŸ”¸ **`connectors.inbound.auth.existingSecret`** â€“ If basic auth is used for inbound connectors.
- ðŸ”¸ **`global.license.existingSecret`** â€“ Required for enterprise licensing.

---

## External Secrets

These secrets are necessary when integrating Camunda with third-party services.

### External Databases and Mail Services

| **Secret**                           | **Chart Values Key**                                                                                            | **Purpose**                                                     | **Default Behavior**    |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- | ----------------------- |
| **External Database Password**       | `webModeler.restapi.externalDatabase.existingSecret`, `webModeler.restapi.externalDatabase.existingSecret.name` | Password for external PostgreSQL if using an external DB        | Not set unless provided |
| **SMTP Password**                    | `webModeler.restapi.mail.existingSecret`                                                                        | SMTP credentials for sending email notifications                | Not set unless provided |
| **Connectors Inbound Auth Password** | `connectors.inbound.auth.existingSecret`, `connectors.inbound.auth.existingSecretKey`                           | Basic auth password for Connectors polling Operate              | Not set unless provided |
| **External Elasticsearch Auth**      | `global.elasticsearch.auth.existingSecret`                                                                      | Password for external Elasticsearch authentication (basic auth) | Not set unless provided |
| **External Elasticsearch TLS Cert**  | `global.elasticsearch.tls.existingSecret`                                                                       | TLS certificate for external Elasticsearch over SSL             | Not set unless provided |
| **External OpenSearch Auth**         | `global.opensearch.auth.existingSecret`                                                                         | Password for external OpenSearch authentication (basic auth)    | Not set unless provided |
| **External OpenSearch TLS Cert**     | `global.opensearch.tls.existingSecret`                                                                          | TLS certificate for external OpenSearch over SSL                | Not set unless provided |

---

## Referencing Secrets in `values.yaml`

> âœ… **Best Practice:** Use the structured form (`existingSecret.name` and `existingSecretKey`) when working with internal secrets. It allows more precise control over which keys are used and promotes reuse of secrets across components.

There are two primary patterns for referencing secrets, depending on the chart and component:

- Use `existingSecret` (flat string) for **simple secrets** such as external database passwords or SMTP credentials.
- Use `existingSecret.name` and `existingSecretKey` (structured form) for **internal secrets** like OAuth client passwords, where the chart expects to access a specific key inside the secret.

> â„¹ï¸ If a field supports the structured format, it's generally safer and clearer to use it.
> The structured format also enables more consistent secret reuse across multiple components.

### Flat String Example

```yaml
webModeler:
  restapi:
    externalDatabase:
      existingSecret: my-db-secret
```

### Structured Example (Recommended)

```yaml
global:
  identity:
    auth:
      operate:
        existingSecret:
          name: camunda-credentials
        existingSecretKey: operate-secret
```

---

## Creating Kubernetes Secrets

Secrets may be created manually using the kubectl CLI or defined in Kubernetes manifests. For more examples, see [Create Identity Secrets in the Camunda Docs](https://docs.camunda.io/docs/self-managed/setup/install/#create-identity-secrets).

To create a secret via `kubectl`::

```sh
kubectl create secret generic camunda-credentials \
  --from-literal=operate-secret=S3cure0p3rat3 \
  --from-literal=tasklist-secret=S3cureT4sk \
  --from-literal=optimize-secret=S3cure0pt1mz \
  --namespace camunda
```

Or using YAML:

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: camunda-credentials
  namespace: camunda
type: Opaque
stringData:
  operate-secret: "S3cure0p3rat3"
  tasklist-secret: "S3cureT4sk"
  optimize-secret: "S3cure0pt1mz"
```

Apply it with:

```sh
kubectl apply -f my-secret.yaml
```

---

## Centralized Secret Example

For simplicity in CI or test environments, you can centralize all secrets in a single Kubernetes Secret. Below is a snippet using a secret named `camunda-credentials`:

> â„¹ï¸ **Note:** This example includes the most common internal secrets. Additional secrets may be required depending on the configurationâ€”for example, when using SMTP, external databases, or connectors with basic authentication:
>
> - `webModeler.restapi.externalDatabase.existingSecret`
> - `webModeler.restapi.mail.existingSecret`
> - `connectors.inbound.auth.existingSecret`
> - `global.license.existingSecret`

```yaml
global:
  secrets:
    autoGenerated: false
    name: "camunda-credentials"
  identity:
    auth:
      admin:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-admin-client-password"
      connectors:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-connectors-client-password"
      console:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-console-client-password"
      operate:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-operate-client-password"
      tasklist:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-tasklist-client-password"
      optimize:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-optimize-client-password"
      zeebe:
        existingSecret:
          name: "camunda-credentials"
        existingSecretKey: "identity-zeebe-client-password"
identity:
  firstUser:
    existingSecret: "camunda-credentials"
    existingSecretKey: "identity-user-password"
identityPostgresql:
  auth:
    existingSecret: "camunda-credentials"
identityKeycloak:
  auth:
    existingSecret: "camunda-credentials"
    passwordSecretKey: "identity-keycloak-admin-password"
  postgresql:
    auth:
      existingSecret: "camunda-credentials"
      secretKeys:
        adminPasswordKey: "identity-keycloak-postgresql-admin-password"
        userPasswordKey: "identity-keycloak-postgresql-user-password"
# WebModeler Database.
postgresql:
  enabled: true
  auth:
    existingSecret: "camunda-credentials"
    secretKeys:
      adminPasswordKey: "webmodeler-postgresql-admin-password"
      userPasswordKey: "webmodeler-postgresql-user-password"
```

---

## Disabling Auto-Generated Secrets

By default, the Camunda Helm chart auto-generates secrets like OAuth client passwords on first install. This ensures the platform can start without manual configuration but can lead to issues on upgrades if the secrets are regenerated.

To use only user-defined secrets and prevent regeneration during upgrades:

```yaml
global:
  secrets:
    autoGenerated: false
```

This will stop auto-generating secrets. Ensure:

- All required secrets are created
- The `existingSecretKey` values match the keys in the Kubernetes Secret
- Secrets exist in the correct namespace

---

## PostgreSQL Configuration Examples

This section covers how to configure PostgreSQL secrets used by the Camunda subcharts: Identity, Keycloak, and Web Modeler.

### Web Modeler PostgreSQL (Bitnami Subchart)

> The Bitnami PostgreSQL subchart used by Web Modeler requires both an admin and user password. These must be referenced using secretKeys when secrets are managed manually.

```yaml
postgresql:
  enabled: true
  auth:
    existingSecret: "camunda-credentials"
    secretKeys:
      adminPasswordKey: "webmodeler-postgresql-admin-password"
      userPasswordKey: "webmodeler-postgresql-user-password"
```

### Identity PostgreSQL

> The Identity service includes its own embedded PostgreSQL instance by default. The `identityPostgresql.auth.existingSecret` field can be used to supply a custom password and ensure consistent database access across upgrades.

```yaml
identityPostgresql:
  enabled: true
  auth:
    existingSecret: "camunda-credentials"
```

### Keycloak PostgreSQL

> Keycloak uses a PostgreSQL instance for persistence, configured under `identityKeycloak.postgresql`. The chart also allows setting the Keycloak admin UI password under `identityKeycloak.auth`.

```yaml
identityKeycloak:
  postgresql:
    auth:
      existingSecret: "camunda-credentials"
      secretKeys:
        adminPasswordKey: "identity-keycloak-postgresql-admin-password"
        userPasswordKey: "identity-keycloak-postgresql-user-password"
  auth:
    existingSecret: "camunda-credentials"
    passwordSecretKey: "identity-keycloak-admin-password"
```

---

## TLS Secrets

When Camunda services are exposed via Ingress with TLS, a Kubernetes Secret containing the TLS certificate and private key is typically required. This is especially important when using tools like cert-manager or securing public-facing services.

### Chart Values

The TLS secret can be configured as shown below:

```yaml
global:
  ingress:
    tls:
      enabled: true
      secretName: camunda-tls-secret
```

### TLS Secret Example

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: camunda-tls-secret
  namespace: camunda
annotations:
  cert-manager.io/issuer: "letsencrypt-prod"
type: kubernetes.io/tls
data:
  tls.crt: <base64 encoded cert>
  tls.key: <base64 encoded key>
```

Ensure the secret name is configured in `values.yaml` under `global.ingress.tls.secretName`.

---

> **Troubleshooting:** If a component fails to start after disabling auto-generated secrets, double-check:
>
> - The secret exists in the correct namespace
> - The `existingSecretKey` is accurate and matches the Kubernetes secret
> - `autoGenerated: false` is set and all required secrets are provided

---

## ðŸ”— Additional References

- ðŸ“˜ [Camunda Docs â€“ Create Identity Secrets](https://docs.camunda.io/docs/self-managed/setup/install/#create-identity-secrets)
- ðŸ“˜ [Camunda Docs â€“ Configure License Key](https://docs.camunda.io/docs/self-managed/setup/install/#configure-license-key)
- ðŸ“˜ [Camunda Helm chart â€“ identity.auth.existingSecrets (8.6)](https://github.com/camunda/camunda-platform-helm/tree/main/charts/camunda-platform-8.6#identity-auth-existing-secrets)
