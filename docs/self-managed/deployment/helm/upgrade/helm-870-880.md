---
id: upgrade-hc-870-880
sidebar_label: Upgrade 8.7 to 8.8
title: Camunda 8.7 to 8.8 Helm chart upgrade
description: "Upgrade to a more recent version of the Camunda Helm charts, and view configuration changes between versions."
toc_max_heading_level: 3
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Upgrade from Camunda 8.7 to Camunda 8.8 by upgrading the Helm chart version from 12.x to 13.x.

:::note Upgrade sequentially
Always upgrade from the latest patch of your current release to the latest patch of the next release.
Example: from 12.x.x → 13.0.1 (not 13.0.0).

Check our [version matrix](https://helm.camunda.io/camunda-platform/version-matrix/) for available versions.
:::

## Prerequisites

The following prerequisites are required before upgrading:

| Prerequisite                            | Description                                                                                                                                                                                                                                                                                                                               |
| :-------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Helm chart version and Helm CLI version | Determine your Helm chart version and Helm CLI version and update them to the recommended versions listed in the [version matrix](https://helm.camunda.io/camunda-platform/version-matrix/).                                                                                                                                              |
| Configuration changes                   | Ensure all required configuration changes in this guide are reviewed, understood, and implemented before running the `helm upgrade` command.                                                                                                                                                                                              |
| 8.7 `values.yaml`                       | The approach described in this guide uses your existing 8.7 `values.yaml` file as a basis to create a new 8.8 `values.yaml`.                                                                                                                                                                                                              |
| Secret management                       | The approach described in this guide is based on the assumption that all your secrets are referenced in an existing Kubernetes secret. See [Extract plaintext values and reference them as Kubernetes Secrets](../configure/secret-management.md#extract-plaintext-values-and-reference-them-as-kubernetes-secrets) for further guidance. |

## Recommended upgrade steps

The recommended approach is as follows:

1. [Create 8.8 values.yaml](#step-1-create-88-valuesyaml): Copy your existing 8.7 `values.yaml` and use it as the basis for the new 8.8 file.
1. [Update for 8.8 compatibility](#step-2-update-for-88-compatibility): Adjust the new `values.yaml` to match the changes in 8.8 and its updated architecture.
1. [Prepare and run the upgrade](#step-3-prepare-and-run-the-upgrade): Add the required upgrade-specific configuration and steps, then execute the helm upgrade command.
1. [Monitor and validate](#step-4-monitor-and-validate): Track the upgrade process and ensure all components start and function properly.

:::caution
**During the upgrade, you must keep the same overall deployment setup.** Configuration values must be updated where required for 8.8 compatibility, but architectural changes or switching authentication methods are not supported during the upgrade. For example, the same components should remain deployed, the same database connections used, and your authentication method must stay the same.
:::

## Step 1: Create 8.8 `values.yaml`

Copy your existing 8.7 values.yaml, rename it (for example, `values-8.8.yaml`), and use it as the basis for your 8.8 configuration.

:::note
Camunda 8.8 introduces major architectural and configuration changes. Using your 8.7 values.yaml as the starting point helps preserve your existing configuration wherever possible during the upgrade.
:::

## Step 2: Update for 8.8 compatibility

Go through the following sections and configure your new 8.8 `values-8.8.yaml` file to be compatible with the new 8.8 changes and architecture.

:::info Key 8.8 changes
Review [What’s new in Camunda 8.8](/reference/announcements-release-notes/880/whats-new-in-88.md)  
and [Assess Camunda 8.8 changes and impact](/self-managed/update/administrators/prepare-for-update.md#step-2-assess-camunda-88-changes-and-impact) before proceeding with your upgrade from 8.7.  
:::

### Values key changes

Adjust your `values.yaml` for the 8.8 configuration changes, and double-check for any deprecated or renamed values.

| **Old key**                              | **New key**                                                               | **Notes**                                                                                                                                                                                                 |
| ---------------------------------------- | ------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Rename top level keys**                |                                                                           |                                                                                                                                                                                                           |
| `postgresql`                             | `webModelerPostgresql`                                                    |                                                                                                                                                                                                           |
| `zeebe`                                  | `orchestration`                                                           |                                                                                                                                                                                                           |
| **New properties to consider**           |                                                                           |                                                                                                                                                                                                           |
| –                                        | `orchestration.contextPath`                                               | Set the context path that is shared by all orchestration cluster components. These will be available under the following subpaths: `contextPath/operate`, `contextPath/tasklist`, `contextPath/identity`. |
| **Global Identity Authentication**       |                                                                           |                                                                                                                                                                                                           |
| `global.identity.auth.zeebe`             | `orchestration.security.authentication.oidc`                              | ⚠️ Different key name                                                                                                                                                                                     |
| `global.identity.auth.connectors`        | `connectors.security.authentication.oidc`                                 | ⚠️ Different key name                                                                                                                                                                                     |
| `global.identity.auth.operate.audience`  | `orchestration.security.authentication.oidc.backwardsCompatibleAudiences` | Add the audience value to the list of `backwardsCompatibleAudiences`.                                                                                                                                     |
| `global.identity.auth.tasklist.audience` | `orchestration.security.authentication.oidc.backwardsCompatibleAudiences` | Add the audience value to the list of `backwardsCompatibleAudiences`.                                                                                                                                     |
| `global.identity.auth.zeebe.audience`    | `orchestration.security.authentication.oidc.backwardsCompatibleAudiences` | Add the audience value to the list of `backwardsCompatibleAudiences`.                                                                                                                                     |
| `global.identity.auth.operate.`          | –                                                                         | All keys besides `audience` should be removed.                                                                                                                                                            |
| `global.identity.auth.tasklist.`         | –                                                                         | All keys besides `audience` should be removed.                                                                                                                                                            |
| **Zeebe Gateway**                        |                                                                           |                                                                                                                                                                                                           |
| `zeebeGateway.ingress`                   | `orchestration.ingress`                                                   |                                                                                                                                                                                                           |
| `zeebeGateway.service.restPort`          | `orchestration.service.httpPort`                                          | ⚠️ Different key name                                                                                                                                                                                     |
| `zeebeGateway.service.grpcPort`          | `orchestration.service.grpcPort`                                          |                                                                                                                                                                                                           |
| `zeebeGateway.service.commandPort`       | `orchestration.service.commandPort`                                       |                                                                                                                                                                                                           |
| `zeebeGateway.service.internalPort`      | `orchestration.service.internalPort`                                      |                                                                                                                                                                                                           |
| `zeebeGateway.*`                         | –                                                                         | All need to be merged into `orchestration.*` space as the Gateway is running embedded in the orchestration cluster.                                                                                       |
| **Operate**                              |                                                                           |                                                                                                                                                                                                           |
| `operate.enabled`                        | `orchestration.profiles.operate`                                          | Operate is enabled by default and can be disabled via the new key.                                                                                                                                        |
| `operate.*`                              | –                                                                         | All need to be merged into `orchestration.*` space as Operate is running embedded in the orchestration cluster.                                                                                           |
| **Tasklist**                             |                                                                           |                                                                                                                                                                                                           |
| `tasklist.enabled`                       | `orchestration.profiles.tasklist`                                         |                                                                                                                                                                                                           |
| `tasklist.*`                             | –                                                                         | All need to be merged into `orchestration.*` space as Tasklist is running embedded in the orchestration cluster.                                                                                          |

#### Merged keys - manually consolidate

These keys existed separately across components and must now be merged within `orchestration`. Carefully adjust these considering the unified configuration changes.

| **Old key**                       | **New key**                        | **Notes** |
| --------------------------------- | ---------------------------------- | --------- |
| **Configuration**                 |                                    |           |
| `zeebe.configuration`             | `orchestration.configuration`      |           |
| `zeebeGateway.configuration`      |                                    |           |
| `operate.configuration`           |                                    |           |
| `tasklist.configuration`          |                                    |           |
| **ExtraConfiguration**            |                                    |           |
| `zeebe.extraConfiguration`        | `orchestration.extraConfiguration` |           |
| `zeebeGateway.extraConfiguration` |                                    |           |
| `operate.extraConfiguration`      |                                    |           |
| `tasklist.extraConfiguration`     |                                    |           |
| **Env**                           |                                    |           |
| `zeebe.env`                       | `orchestration.env`                |           |
| `zeebeGateway.env`                |                                    |           |
| `operate.env`                     |                                    |           |
| `tasklist.env`                    |                                    |           |
| **EnvFrom**                       |                                    |           |
| `zeebe.envFrom`                   | `orchestration.envFrom`            |           |
| `zeebeGateway.envFrom`            |                                    |           |
| `operate.envFrom`                 |                                    |           |
| `tasklist.envFrom`                |                                    |           |
| **InitContainers**                |                                    |           |
| `zeebe.initContainers`            | `orchestration.initContainers`     |           |
| `zeebeGateway.initContainers`     |                                    |           |
| `operate.initContainers`          |                                    |           |
| `tasklist.initContainers`         |                                    |           |
| **Sidecars**                      |                                    |           |
| `zeebe.sidecars`                  | `orchestration.sidecars`           |           |
| `zeebeGateway.sidecars`           |                                    |           |
| `operate.sidecars`                |                                    |           |
| `tasklist.sidecars`               |                                    |           |
| **ExtraVolumes**                  |                                    |           |
| `zeebe.extraVolumes`              | `orchestration.extraVolumes`       |           |
| `zeebeGateway.extraVolumes`       |                                    |           |
| `operate.extraVolumes`            |                                    |           |
| `tasklist.extraVolumes`           |                                    |           |
| **ExtraVolumeMounts**             |                                    |           |
| `zeebe.extraVolumeMounts`         | `orchestration.extraVolumeMounts`  |           |
| `zeebeGateway.extraVolumeMounts`  |                                    |           |
| `operate.extraVolumeMounts`       |                                    |           |
| `tasklist.extraVolumeMounts`      |                                    |           |
| **Retention**                     |                                    |           |
| `operate.retention`               | `orchestration.history.retention`  |           |
| `tasklist.retention`              | `orchestration.history.retention`  |           |

It is highly recommended to migrate to the new orchestration values structure. However, the Camunda 8.8 Helm chart (13.x.x) provides a compatibility layer, so configurations using the old structure from Camunda 8.7 (12.x.x) will still work. Enable the compatibility layer with:

```yaml
global:
  compatibility:
    orchestration:
      enabled: true
```

### Changes to the default deployment setup

Starting with **Camunda 8.8**, the set of components deployed by default has changed compared to 8.7.  
If you want to continue deploying any of the optional components listed below, you must now enable them explicitly by setting `enabled: true` in your `values.yaml`.

- **Console** → `console.enabled: true`
- **Management Identity** → `identity.enabled: true`
- **Web Modeler** → `webModeler.enabled: true`
- **Optimize** → `optimize.enabled: true`
- **PostgreSQL (Bitnami subcharts):**
  - Identity database → `identityPostgresql.enabled: true`
  - Web Modeler database → `webModelerPostgresql.enabled: true`
- **Keycloak (Bitnami subchart)** → `identityKeycloak.enabled: true`

For more information, see [Enable additional components](/self-managed/deployment/helm/configure/enable-additional-components.md).

### Multi-tenancy configuration

If you previously configured **multi-tenancy** in 8.7, note that it now requires dedicated configuration within the **Orchestration Cluster** too.  
For guidance, see [Configure multi-tenancy in the Helm chart](../configure/configure-multi-tenancy.md).

### Migrate to combined Ingress

Starting with Camunda 8.8, the separated ingress configuration is no longer supported. Use the combined Ingress setup or replicate the previous behavior as outlined in [Configure Ingress](../configure/ingress/ingress-setup.md).

### Authentication

Make sure authentication is configured according to the following guidance:

<Tabs groupId="authentication" defaultValue="basic" queryString values={
[
{label: 'Basic auth', value: 'basic' },
{label: 'OIDC', value: 'oidc' },
{label: 'OAuth (Keycloak)', value: 'keycloak' },
{label: 'LDAP', value: 'ldap' },

]}>

<TabItem value='basic'>

Previously, in 8.7, if basic auth was enabled, it only applied to Operate and Tasklist. With 8.8, authentication now applies to the entire Orchestration Cluster. This means you must either migrate your users to the new cluster or reconfigure them accordingly.
If you do not want to use authentication, you must explicitly disable it for Orchestration cluster; otherwise, users must be added to all requests. Ensure your `values.yaml` matches the configuration described in [Basic authentication configuration](../configure/authentication-and-authorization/index.md#basic-authentication).

</TabItem>

<TabItem value='oidc'>

For your OIDC configuration, make sure the following values are set:

```yaml
orchestration:
  security:
    authentication:
      method: oidc
      oidc:
        clientIdClaim: "azp"
        clientId: "<YOUR_CLIENTID>"
        secret:
          existingSecret: "<YOUR_CLIENTSECRET>"
          existingSecretKey: "<YOUR_CLIENTSECRET_KEY>"
        issuer: "<YOUR_ISSUERURI>"
        audience: "<YOUR_AUDIENCE>"
        redirectUrl: "<YOUR_REDIRECTURI>"
        jwksUrl: <YOUR_JKWS_URL>
        tokenUrl: <YOUR_TOKEN_URL>
        tokenScope: <YOUR_TOKEN_SCOPE_VALUE>
        # Configure dependent on your OIDC provider type, e.g. "MICROSOFT", "KEYCLOAK"
        type: "MICROSOFT"
        # Configure on your preference for user identifier, default preferred_username
        usernameClaim: preferred_username
        # Configure on your preference for client identifier, default client_id
        clientIdClaim: client_id
        # Configure on your preference for group identifier, default groups
        groupsClaim: "groups"
        # Optional list of former operate/ tasklist/ zeebe audiences to continue to guarantee access
        backwardsCompatibleAudiences:
          - <YOUR_8.7_AUDIENCE>
```

</TabItem>

<TabItem value='keycloak'>

For an internal setup, follow the [Internal Keycloak guide](self-managed/deployment/helm/configure/authentication-and-authorization/index.md##internal-keycloak)
.
For an external Keycloak deployment, make sure your `values.yaml` is configured as described in [OpenID connect provider setup](/self-managed/deployment/helm/configure/authentication-and-authorization/connect-to-an-oidc-provider.md).

</TabItem>

<TabItem value='ldap'>

LDAP authentication is not supported in the new 8.8 architecture.
Contact [Camunda Consulting](https://camunda.com/services/consulting/) for assistance with LDAP authentication requirements.

</TabItem>

</Tabs>

## Step 3: Prepare and run the upgrade

### Configure migration configuration

For the migration, you must enable the **data migration** configuration. See [Data migration](../../../components/components-upgrade/870-to-880.md#data-migration) for details:

```yaml
orchestration:
  migration:
    data:
      enabled: true
```

It is recommended to enable the **identity migration** to automatically migrate roles and permissions from the Management Identity to the Orchestration cluster Identity, preserving your existing authorization setup from 8.7. For more information, see [Running the Identity Migration Application](../../../components/components-upgrade/870-to-880.md#running-the-identity-migration-application):

```yaml
migration:
  identity:
    enabled: true
    claimName: "<YOUR_CLAIM_NAME>"
    claimValue: "<YOUR_CLAIM_VALUE>"
    clientId: "YOUR_CLIENT_ID"
    secret:
      existingSecret: <YOUR_EXISTING_SECRET>
      existingSecretKey: <YOUR_EXISTING_SECRET_KEY>
      # only required if resource authorizations are used
    resourceAuthorizationsEnabled: true
```

:::info
The Identity Migration App requires access to Management Identity. The access permission is created via a mapping rule based on the provided `claimName` and `claimValue`.
Set `claimName: oid` for Entra ID or `claimName: "sub"` for Keycloak.
The clientId and secret are required to authorize the Identity Migration App via your identity provider.
:::

### Upgrade with Helm

After preparing your secrets and setting the migration configuration (data, identity migration, and importers), trigger the upgrade with `helm upgrade`:

```bash
helm repo update
helm upgrade camunda camunda/camunda-platform -f values-8.8.yaml
```

## Step 4: Monitor and validate

### Monitor the upgrade

After triggering the Helm upgrade, monitor the rollout to ensure all pods return to a healthy state and the migration jobs finish successfully.

#### 1. Watch pod rollout progress

Watch the pods being migrated via:

```bash
kubectl -n <namespace> get pods -w
```

**What you should see:**

- Pods gradually terminate and restart with new versions.
- The Orchestration Cluster (`zeebe` StatefulSet) keeps its name to avoid downtime - previous Operate/Tasklist pods will terminate.
- A temporary `*-importer` deployment appears to migrate remaining 8.7 data into 8.8.
- If both migrations are enabled, two Kubernetes Jobs run in parallel:
  - `*-zeebe-migration-data` (always present)
  - `*-zeebe-migration-identity` (optional – only if identity migration is enabled)

#### 2. Inspect migration and importer logs

```bash
# Importer deployment (migrates remaining Zeebe data)
kubectl -n <namespace> logs deploy/<importer-name> -f

# Data migration job
kubectl -n <namespace> logs job/<release>-zeebe-migration-data -f

# Identity migration job (if enabled)
kubectl -n <namespace> logs job/<release>-zeebe-migration-identity -f
```

**Expected log output:**

- Importer logs will show batches of records being imported and end with: `Importer finished successfully.`
- Data and Identity migration logs conclude with: `All migrations completed successfully.`
  - The jobs will just start once the Importer finsihed successfully.
  - Once both jobs report completion, they will terminate automatically with status `Complete`.

If a job is stuck in `Running` or `CrashLoopBackOff`, inspect its logs.
Wait until all pods are up and in `ready` state before continuing.

### Validate the upgrade

1. Confirm all pods are healhy:

```bash
kubectl -n <namespace> get pods
```

2. Confirm all pods are running on the new 8.8.x images:

```bash
kubectl -n <namespace> get pods -o jsonpath="{range .items[*]}{.metadata.name}{':\t'}{range .spec.containers[*]}{.image}{'\n'}{end}{end}"
```

3. Verify access to Camunda components

- Acess Camunda components and verify users can log in with migrated roles. E.g. for the Orchestration cluster access:

```bash
https://<your-domain>/<contextPath>/operate
https://<your-domain>/<contextPath>/tasklist
https://<your-domain>/<contextPath>/identity
```

4. Verify workers

Verify yoru workers are still working

5. Optional: Scale down importer

Scale down the importer once confirmed idle:

```bash
kubectl -n <namespace> scale deploy/<importer-name> --replicas=0
```

## Troubleshooting

### Upgrade failed due to missing secrets

The following upgrade error might be related to not having secrets as Kubernetes referenced secrets as required in [Prerequisites](#prerequisites).

```shell
Error: UPGRADE FAILED: execution error at (camunda-platform/charts/identity/templates/tasklist-secret.yaml:10:22):
PASSWORDS ERROR: You must provide your current passwords when upgrading the release.
                 Note that even after reinstallation, old credentials may be needed as they may be kept in persistent volume claims.
                 Further information can be obtained at https://docs.bitnami.com/general/how-to/troubleshoot-helm-chart-issues/#credential-errors-while-upgrading-chart-releases

    'global.identity.auth.tasklist.existingSecret' must not be empty, please add '--set global.identity.auth.tasklist.existingSecret=$TASKLIST_SECRET' to the command. To get the current value:

        export TASKLIST_SECRET=$(kubectl get secret --namespace "camunda" "camunda-platform-test-tasklist-identity-secret" -o jsonpath="{.data.tasklist-secret}" | base64 --decode)
```

When the Helm chart is removed or upgraded, persistent volume claims (PVCs) for secret storage are not removed or recreated. To prevent Helm from recreating secrets that have already been generated, the [Bitnami](https://github.com/bitnami/charts/tree/master/bitnami/common) library chart used by Camunda blocks the upgrade path, resulting in the above error.

To complete your upgrade, [Extract plaintext values and reference them as Kubernetes Secrets](../configure/secret-management.md#extract-plaintext-values-and-reference-them-as-kubernetes-secrets).


## (WIP) Sections to re-integrate

### Multi-region migration

If you are upgrading a dual-region deployment, the upgrade steps in this guide as well as the components upgrade guide apply. The following are additional configuration considerations for multi-region (dual-region) setups.

:::info
Multi-region deployments, as outlined in our [reference](/self-managed/deployment/helm/cloud-providers/amazon/amazon-eks/dual-region.md), require manual exporter configuration. Follow the additional steps below **in addition to** the standard upgrade process outlined in this guide.
:::

#### Required configuration changes

The following table outlines configuration changes specific to multi-region deployments:

| Configuration area        | Change required                                       | Description                                                                                                                                                                   |
| ------------------------- | ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Exporter keys**         | Replace `global.elasticsearch.disableExporter: false` | Use `orchestration.exporters.camunda.enabled: false` and `orchestration.exporters.zeebe.enabled: false` instead                                                               |
| **New Camunda Exporter**  | Define for both regions                               | Configure the new [Camunda Exporter](/self-managed/components/orchestration-cluster/zeebe/exporters/elasticsearch-exporter.md)                                                |
| **Legacy Exporter**       | Retain during migration                               | Keep the old [Elasticsearch / OpenSearch Exporter](/self-managed/components/orchestration-cluster/zeebe/exporters/elasticsearch-exporter.md) definitions                      |
| **Environment variables** | Update gateway prefixes                               | Change `ZEEBE_GATEWAY_*` to `ZEEBE_BROKER_GATEWAY_*` (embedded gateway architecture)                                                                                          |
| **Message compression**   | Add to orchestration config                           | Required for migration jobs to communicate with the Zeebe cluster                                                                                                             |
| **Basic auth users**      | Migrate manually                                      | Users defined in `camunda.operate` or `camunda.tasklist` require manual migration to [embedded Identity](/self-managed/components/orchestration-cluster/identity/overview.md) |
| **API security**          | Review defaults                                       | gRPC and REST APIs are secured by default in 8.8                                                                                                                              |

#### Configure exporters for both regions

Define the new Camunda Exporter for each region while retaining legacy exporters during migration. See the [Camunda Exporter documentation](/self-managed/components/orchestration-cluster/zeebe/exporters/elasticsearch-exporter.md) for authentication and additional configuration options.

**Keep existing 8.7 exporters** (e.g., `ZEEBE_BROKER_EXPORTERS_ELASTICSEARCHREGION0_CLASSNAME`) and **add new Camunda exporters**:

```yaml
orchestration:
  exporters:
    camunda:
      enabled: false
    zeebe:
      enabled: false
  env:
    # Existing 8.7 exporters - retain for migration
    # ...

    # New Region 0 Camunda Exporter
    - name: ZEEBE_BROKER_EXPORTERS_CAMUNDAREGION0_CLASSNAME
      value: io.camunda.exporter.CamundaExporter
    - name: ZEEBE_BROKER_EXPORTERS_CAMUNDAREGION0_ARGS_CONNECT_URL
      value: PLACEHOLDER

    # New Region 1 Camunda Exporter
    - name: ZEEBE_BROKER_EXPORTERS_CAMUNDAREGION1_CLASSNAME
      value: io.camunda.exporter.CamundaExporter
    - name: ZEEBE_BROKER_EXPORTERS_CAMUNDAREGION1_ARGS_CONNECT_URL
      value: PLACEHOLDER
```

> Replace `PLACEHOLDER` with the values currently used for `ZEEBE_BROKER_EXPORTERS_ELASTICSEARCHREGION0_ARGS_CONNECT_URL` and `ELASTICSEARCHREGION1_ARGS_CONNECT_URL`.

#### Update environment variable naming

In 8.8, the Zeebe Gateway is embedded with the Orchestration Cluster. Environment variable prefixes have changed:

- **Old prefix:** `ZEEBE_GATEWAY_*`
- **New prefix:** `ZEEBE_BROKER_GATEWAY_*`

**Example:**  
`ZEEBE_GATEWAY_CLUSTER_MESSAGECOMPRESSION` → `ZEEBE_BROKER_GATEWAY_CLUSTER_MESSAGECOMPRESSION`

:::caution
If your multi-region setup uses cluster message compression (standard practice), additionally configure the former `ZEEBE_GATEWAY_CLUSTER_MESSAGECOMPRESSION` in the `orchestration.env` section. Migration jobs use a standalone gateway and require this variable to communicate with the Zeebe cluster.
:::

#### Enable migration components

Follow the [Data migration](#data-migration-required) section, ensuring migration components are enabled:

```yaml
orchestration:
  migration:
    data:
      enabled: true
```

#### Handle authentication changes

Basic authentication now applies to the entire Orchestration Cluster. If you previously defined users in `camunda.operate.userId` or `camunda.tasklist.userId`:

1. Manually migrate users to the new [embedded Identity](/self-managed/components/orchestration-cluster/identity/overview.md).
2. Configure initial users to avoid falling back to `demo:demo` credentials.
3. Review the [Authentication](#authentication) section of this guide.

**API security defaults:** gRPC and REST APIs are secured by default in 8.8. To restore previous behavior:

```yaml
orchestration:
  security:
    authentication:
      unprotectedApi: false
    authorizations:
      enabled: false
```

#### Reference configuration example

See the [example `values.yaml`](https://github.com/camunda/c8-multi-region/blob/main/aws/dual-region/kubernetes/camunda-values-migration.yml) showing 8.7 → 8.8 changes with migration enabled.

#### Multi-region specific considerations

Since every setup can differ, here are some edge cases to consider when upgrading multi-region deployments:

- **Multiple secondary storages (default)**:
  When each region has its own secondary storage, enable the migration in both regions, as the storages are isolated and each requires the migration independently.

- **Identity migration (if using Identity):**  
  Enable [Identity migration](#identity-migration-optional). Review the [migration of secrets](#migrate-secrets-to-new-format).

- **Helm-managed single region exporters:**  
  When using one external secondary storage instead of two and using the Helm chart managed exporter, consider enabling the following to ensure automatic creation:
    - Set `orchestration.exporters.zeebe.enabled: true` and `orchestration.exporters.camunda.enabled: true`.
    - Keep it disabled in case you're defining the exporter yourself.

- **Single secondary storage (for example, single central Elasticsearch/OpenSearch cluster):**  
  Deploy the data migration in **only one region** - set `orchestration.migration.data.enabled: true` for the first region, and `false` for all others.

- **Optimize deployment (if Optimize is used alongside Identity):**  
  Keep the old Elasticsearch exporter enabled after migration, as Optimize does not yet support the Camunda Exporter.

Regardless, the regions must be upgraded **simultaneously**, though specific caveats may apply as outlined above.

#### Post-migration

If Optimize is not in use, disable the old (legacy Elasticsearch/OpenSearch) exporter via the [Zeebe Management API](/self-managed/components/orchestration-cluster/zeebe/operations/management-api.md) and then remove its configuration from your `values.yaml`.

Review the updated [operational procedure for dual-region](/self-managed/deployment/helm/operational-tasks/dual-region-ops.md).

### Recommended migration configuration

This example shows a full 8.8 values.yaml migration setup. While data migration and importers are required for a successful upgrade from 8.7, it’s recommended to enable all migration components:
