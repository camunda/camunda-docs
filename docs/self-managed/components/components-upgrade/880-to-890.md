---
id: 880-to-890
sidebar_label: Update 8.8 to 8.9
title: Components update 8.8 to 8.9
description: "Review which adjustments must be made to update from Camunda 8.8.x to Camunda 8.9.0."
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

The following sections explain which adjustments must be made to migrate from Camunda 8.8.x to 8.9.x.

## Web Modeler

### Cluster configuration

#### Logging framework changed

Web Modeler's `restapi` component now uses [Apache Log4j 2](https://logging.apache.org/log4j/2.x/) for logging.

See the [migration guide](https://logging.apache.org/log4j/2.x/migrate-from-logback.html) to learn about the changes you may need to make if you are using a custom Logback configuration.

### Logging configuration

The default logging configuration is included inline for quick reference.

The default layout displays **time only**, thread name, MDC context, log level, logger name, and message.

#### Example pattern

```perl
%d{HH:mm:ss.SSS} [%t] %notEmpty{[%X] }%-5level %logger{36} - %msg%n
```

See [Logging](/self-managed/components/modeler/web-modeler/configuration/logging.md) for advanced settings and more details.

### Embedded web server

Web Modeler now uses [Apache Tomcat](https://tomcat.apache.org/) as an embedded web server instead of [Undertow](https://undertow.io/).

If you are using a custom Undertow configuration, you will need to migrate it.

You should consider the following when upgrading:

:::info

- For a full list of Spring properties, refer to the [Spring documentation](https://docs.spring.io/spring-boot/appendix/application-properties/index.html).
- For more information, refer to the [Spring embededded web server documentation](https://docs.spring.io/spring-boot/how-to/webserver.html).

:::

#### Undertow-specific properties (remove/replace)

If you have anything defined under:

```yaml
server.undertow.*
```

These properties will not work once you switch to Tomcat. See below for a complete list of important properties, and the recommended action to take.

##### Undertow access log

| Undertow property                   | What to do after migrating                                    |
| :---------------------------------- | :------------------------------------------------------------ |
| `server.undertow.accesslog.enabled` | Replace with server.tomcat.accesslog.enabled.                 |
| `server.undertow.accesslog.pattern` | Replace with server.tomcat.accesslog.pattern.                 |
| `server.undertow.accesslog.dir`     | Replace with server.tomcat.basedir or a custom log directory. |
| `server.undertow.accesslog.prefix`  | Tomcat uses server.tomcat.accesslog.prefix.                   |
| `server.undertow.accesslog.rotate`  | Tomcat rotates differently → confirm desired behavior.        |

##### Undertow Threading

| Undertow property                | Tomcat equivalent                                      |
| :------------------------------- | :----------------------------------------------------- |
| `server.undertow.threads.io.`    | `server.tomcat.max-connections / connector customizer` |
| `server.undertow.threads.worker` | `server.tomcat.max-threads`                            |
| `server.undertow.buffer-size`    | Tomcat uses internal buffer sizes — no direct property |
| `server.undertow.direct-buffers` | No equivalent (Tomcat uses NIO buffers differently)    |

##### Undertow builder/handler customizations

Most of the following properties have no direct Tomcat property and must be implemented via:

- `TomcatServletWebServerFactory`
- `TomcatConnectorCustomizer`
- or left out if not needed

```yaml
server.undertow.eager-filter-init
server.undertow.allow-encoded-slash
server.undertow.decode-url
server.undertow.max-http-post-size
server.undertow.no-request-timeout
```

#### Tomcat-specific properties (add/review)

If you have anything defined under:

```yaml
server.tomcat.*
```

These properties now become more relevant. Review the following subset of properties.

##### Access logs

| Tomcat property                     | Description              |
| :---------------------------------- | :----------------------- |
| `server.tomcat.accesslog.enabled`   | Enable Tomcat access log |
| `server.tomcat.accesslog.directory` | Directory for logs       |
| `server.tomcat.accesslog.pattern`   | Log format               |
| `server.tomcat.accesslog.prefix`    | Filename prefix          |
| `server.tomcat.accesslog.suffix`    | Filename suffix          |

:::note
Tomcat rotates differently than Undertow. Verify log retention and file sizes.
:::

##### Performance/threading

| Property                          | Description                         |
| :-------------------------------- | :---------------------------------- |
| `server.tomcat.max-connections`   | Max simultaneous connections        |
| `server.tomcat.accept-count `     | Queue size for incoming connections |
| `server.tomcat.max-threads `      | Max request-processing threads      |
| `server.tomcat.min-spare-threads` | Minimum idle threads                |

Tomcat uses a standard blocking I/O thread model, unlike Undertow’s worker and IO threads.

##### Remote IP/proxy handling

If you are behind a proxy/load balancer, review the following properties:

| Property                                  | Use                          |
| :---------------------------------------- | :--------------------------- |
| `server.tomcat.remoteip.remote-ip-header` | Example: `X-Forwarded-For`   |
| `server.tomcat.remoteip.protocol-header`  | Example: `X-Forwarded-Proto` |
| `server.tomcat.remoteip.internal-proxies` | Regex for trusted proxies    |
| `server.forward-headers-strategy`         | `NATIVE` or `FRAMEWORK`      |

:::info important
As Undertow handled forwarded headers differently, it is important that you review these properties.
:::

##### MBean registry

Tomcat disables the MBean registry by default:

```
server.tomcat.mbeanregistry.enabled=true
```

Enable this if you need Java Management Extensions (JMX) metrics.

##### Legacy cookie processor (if needed)

If your app depends on older or RFC-violating cookies:

```
server.tomcat.use-legacy-cookie-processor=true
```

Undertow is more lenient with cookies, so some apps require this.

##### Additional Tomcat options

| Property                            | Notes                                                   |
| :---------------------------------- | :------------------------------------------------------ |
| `server.tomcat.relaxed-path-chars`  | Useful for special characters in URLs.                  |
| `server.tomcat.relaxed-query-chars` | Needed when Undertow allowed characters Tomcat rejects. |
| `server.tomcat.connection-timeout`  | Defaults differ compared to Undertow.                   |

#### Review behavioral differences (Not Just Properties)

Review the following, in addition to the properties as described above.

##### URL decoding and allowed characters

As Tomcat is stricter, if you were previously using URLs such as:

```
/api/v1/some%2Fpath
```

Tomcat could reject them, unless you update your configuration:

```
server.tomcat.relaxed-path-chars=/
server.tomcat.relaxed-query-chars=|,{,},[,]
```

##### Large payload handling

Review Undertow’s `max-http-post-size` because Tomcat uses:

```
spring.servlet.multipart.max-file-size
spring.servlet.multipart.max-request-size
server.tomcat.max-swallow-size
```
