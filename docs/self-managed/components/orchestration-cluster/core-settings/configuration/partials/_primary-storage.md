import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Data - primary storage

<Tabs>
  <TabItem value="application.yaml" label="Application properties">

### `camunda.data.primary-storage`

| Property                                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :----------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.directory`         | <p>Specify the directory in which data is stored.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `'data'`      |
| `camunda.data.primary-storage.runtime-directory` | <p>Specify the directory in which runtime is stored.</p><ul><li>By default, runtime is stored in `directory` for data.</li><li>If `runtime-directory` is configured, then the configured directory will be used. It will have a subdirectory for each partition to store its runtime.</li><li>There is no need to store the runtime in a persistent storage.</li><li>This configuration allows you to split runtime to another disk to optimize for performance and disk usage.</li></ul><p><strong>Note:</strong> If runtime is on a different disk than the data directory, files must be copied to the data directory while taking the snapshot. This can impact disk i/o or performance during snapshotting.</p> | `''`          |

### `camunda.data.primary-storage.disk`

| Property                                                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :--------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.disk.monitoring-interval`    | <p>Sets the interval at which the disk usage is monitored.</p>                                                                                                                                                                                                                                                                                                                                                                       | `1s`          |
| `camunda.data.primary-storage.disk.monitoring-enabled`     | <p>Configure disk monitoring to prevent getting into a non-recoverable state due to out of disk space.</p><p>If monitoring is enabled, the broker rejects commands and pauses replication when the required `freeSpace` is not available.</p>                                                                                                                                                                                        | `true`        |
| `camunda.data.primary-storage.disk.free-space.processing`  | <p>When the free space available is less than this value, the broker rejects all client commands and pauses processing.</p>                                                                                                                                                                                                                                                                                                          | `2GB`         |
| `camunda.data.primary-storage.disk.free-space.replication` | <p>When the free space available is less than this value, the broker stops receiving replicated events.</p><p>This value must be less than `free-space.processing`.</p><p>It is recommended to configure free space large enough for at least one log segment and one snapshot. This is because a partition needs enough space to take a new snapshot to be able to compact the log segments to make disk space available again.</p> | `1GB`         |

### `camunda.data.primary-storage.logstream`

| Property                                                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Default value |
| :--------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.logstream.log-segment-size`  | <p>The size of data log segment files.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                    | `128MB`       |
| `camunda.data.primary-storage.logstream.log-index-density` | <p>The density of the log index, which determines how frequently index entries are created in the log.</p><p>This value specifies the number of log entries between each index entry. A lower value increases the number of index entries (improving lookup speed but using more memory), while a higher value reduces the number of index entries (saving memory but potentially slowing lookups).</p><p>Valid values: any positive integer (recommended range: 1-1000).</p> | `100`         |

### `camunda.data.primary-storage.rocksdb`

| Property                                                                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :---------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.rocksdb.statistics-enabled`               | <p>Enables RocksDB statistics, which will be written to the RocksDB log file.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `false`       |
| `camunda.data.primary-storage.rocksdb.access-metrics`                   | <p>Configures which, if any, RocksDB column family access metrics are exposed. Valid values are `none` (the default), and `fine` which exposes many metrics covering the read, write, delete and iteration latency per partition and column family.</p>                                                                                                                                                                                                                                                                                                                              | `none`        |
| `camunda.data.primary-storage.rocksdb.memory-limit`                     | <p>Configures the memory limit, which can be used by RocksDB.</p><p>Be aware that this setting only applies to RocksDB, which is used by the Zeebe's state management and that an RocksDB instance is used per partition.</p>                                                                                                                                                                                                                                                                                                                                                        | `512MB`       |
| `camunda.data.primary-storage.rocksdb.max-open-files`                   | <p>Configures how many files are kept open by RocksDB. The default is unlimited (-1).</p><p>This is a performance optimization: if you set a value greater than zero, it will keep track and cap the number of open files in the `TableCache`.</p><p>On accessing the files it needs to look them up in the cache.</p><p>You should configure this property if the maximum open files are limited on your system, or if you have thousands of files in your RocksDB state as there is a memory overhead to keeping all of them open, and setting `maxOpenFiles` will bound that.</p> | `-1`          |
| `camunda.data.primary-storage.rocksdb.max-write-buffer-number`          | <p>Configures the maximum number of simultaneous write buffers/memtables RocksDB will have in memory.</p><p>Normally about 2/3s of the `memoryLimit` is used by the write buffers, and this is shared equally by each write buffers.</p><p>This means the higher `maxWriteBufferNumber` is, the less memory is available for each. This means you will flush less data at once, but may flush more often.</p>                                                                                                                                                                        | `6`           |
| `camunda.data.primary-storage.rocksdb.min-write-buffer-number-to-merge` | <p>Configures how many write buffers should be full before they are merged and flushed to disk.</p><p>A higher numeric value means you may flush less often, but will flush more data at once.</p><p>A lower numeric value means flushing more often, but flushing less data at once.</p>                                                                                                                                                                                                                                                                                            | `3`           |
| `camunda.data.primary-storage.rocksdb.io-rate-bytes-per-second`         | <p>Configures a rate limit for write I/O of RocksDB.</p><p>Setting any value less than or equal to 0 will disable this, which is the default setting.</p><p>Setting a rate limit on the write I/O can help achieve more stable performance by avoiding write spikes consuming all available IOPS, leading to more predictable read rates.</p>                                                                                                                                                                                                                                        | `0`           |
| `camunda.data.primary-storage.rocksdb.wal-disabled`                     | <p>Configures if the RocksDB write-ahead-log is used or not.</p><p>By default, every write in RocksDB goes to the active write buffer and the WAL; this helps recover a RocksDB instance should it crash before the write buffer is flushed.</p><p>Zeebe however only recovers from specific point-in-time snapshot, and never from a previously active RocksDB instance, which makes it a good candidate to disable the WAL. WAL is disabled by default as it can improve performance of Zeebe.</p>                                                                                 | `true`        |
| `camunda.data.primary-storage.rocksdb.sst-partitioning-enabled`         | <p>Configures if the RocksDB SST files should be partitioned based on some virtual column families.</p><p>By default, RocksDB will not partition the SST files, which could influence the compacting of certain key ranges.</p><p>Enabling this option gives RocksDB some good hints how to improve compaction and reduce the write amplification.</p><p>Benchmarks have shown impressive results, allowing sustained performance on larger states.</p><p>This setting will increase the general file count of runtime and snapshots.</p>                                            | `true`        |

### `camunda.data.primary-storage.backup`

| Property                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Default value |
| :------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.backup.store` | <p>Set the backup store type.</p><p>Supported values are `NONE`, `S3`, `GCS`, `AZURE`, `FILESYSTEM`.</p><ul><li>`NONE`: No backup store is configured and no backup will be taken.</li><li>`S3`: Use any [Amazon S3 compatible storage](https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html).</li><li>`GCS`: Use [Google Cloud Storage](https://cloud.google.com/storage/).</li><li>`AZURE`: Use [Azure Storage](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction).</li><li>`FILESYSTEM`: Use filesystem storage</li></ul><p><strong>Note:</strong> This configuration applies to the backup of primary storage.</p> | `NONE`        |

### `camunda.data.primary-storage.backup.s3`

| Property                                                                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :---------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.backup.s3.bucket-name`                    | <p>Name of the bucket where the backup will be stored.</p><ul><li>The bucket must be already created.</li><li>The bucket must not be shared with other zeebe clusters.</li><li>The `bucketName` must not be empty.</li></ul>                                                                                                                                                                                                                         | Null          |
| `camunda.data.primary-storage.backup.s3.endpoint`                       | <p>Configure the URL endpoint for the store. If no endpoint is provided, it will be determined based on the configured region.</p>                                                                                                                                                                                                                                                                                                                   | Null          |
| `camunda.data.primary-storage.backup.s3.region`                         | <p>Configure the AWS region.</p><p>If no region is provided it will be determined as documented in [setting the AWS Region for the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html#automatically-determine-the-aws-region-from-the-environment).</p>                                                                                                                                     | Null          |
| `camunda.data.primary-storage.backup.s3.access-key`                     | <p>Configure access credentials.</p><p>If either `accessKey` or `secretKey` is not provided, the credentials will be determined as documented in [using credentials providers in the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html#credentials-chain").</p>                                                                                                                                 | -             |
| `camunda.data.primary-storage.backup.s3.secret-key`                     | <p>Configure access credentials.</p><p>If either `accessKey` or `secretKey` is not provided, the credentials will be determined as documented in [using credentials providers in the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html#credentials-chain").</p>                                                                                                                                 | -             |
| `camunda.data.primary-storage.backup.s3.api-call-timeout`               | <p>Configure a maximum duration for all S3 client API calls.</p><p>Lower values will ensure that failed or slow API calls don't block other backups but may increase the risk that backups can't be stored if uploading parts of the backup takes longer than the configured timeout.</p><p>Refer to [AWS Java SDK 2.x Best Practices](https://github.com/aws/aws-sdk-java-v2/blob/master/docs/BestPractices.md#utilize-timeout-configurations).</p> | `180s`        |
| `camunda.data.primary-storage.backup.s3.force-path-style-access`        | <p>If enabled, forces the s3 client to use path-style access.</p><p>By default, the client will automatically choose between path-style and virtual-hosted-style.</p><p>This should only be enabled if the s3 compatible storage cannot support virtual-hosted-style.</p><p>Refer to [accessing an Amazon S3 general purpose bucket](https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-bucket-intro.html).</p>                            | `false`       |
| `camunda.data.primary-storage.backup.s3.compression`                    | <p>When set to an algorithm such as `'zstd'`, enables compression of backup contents.</p><p>When not set or set to `'none'`, backup content is not compressed.</p><p>Enabling compression reduces the required storage space for backups in S3 but also increases the impact on CPU and disk utilization while taking a backup.</p>                                                                                                                  | -             |
| `camunda.data.primary-storage.backup.s3.max-concurrent-connections`     | <p>Maximum number of connections allowed in a connection pool.</p><p>This is used to restrict the maximum number of concurrent uploads as to avoid connection timeouts when uploading backups with large/multiple files.</p>                                                                                                                                                                                                                         | `50`          |
| `camunda.data.primary-storage.backup.s3.connection-acquisition-timeout` | <p>Timeout for acquiring an already-established connection from a connection pool to a remote service.</p>                                                                                                                                                                                                                                                                                                                                           | `45s`         |
| `camunda.data.primary-storage.backup.s3.base-path`                      | <p>When set, all objects in the bucket will use this prefix. Must be non-empty and not start or end with '`/`'.</p><p>This is useful for using the same bucket for multiple Zeebe clusters. In this scenario, the `basePath` must be unique.</p>                                                                                                                                                                                                     | Null          |
| `camunda.data.primary-storage.backup.s3.support-legacy-md5`             | <p>Enable s3 md5 plugin for legacy support.</p>                                                                                                                                                                                                                                                                                                                                                                                                      | Null          |

### `camunda.data.primary-storage.backup.gcs`

| Property                                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Default value |
| :---------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.backup.gcs.bucket-name` | <p>Name of the bucket where the backup will be stored.</p><ul><li>The bucket must already exist.</li><li>The bucket must not be shared with other Zeebe clusters unless `basePath` is also set.</li></ul>                                                                                                                                                                                                                                                                                 | Null          |
| `camunda.data.primary-storage.backup.gcs.endpoint`    | <p>When set, all blobs in the bucket will use this prefix. This is useful for using the same bucket for multiple Zeebe clusters.</p><p>In this scenario, the `basePath` must be unique. It should not start or end with a '`/`' character. It must be non-empty and not consist of only '`/`' characters.</p>                                                                                                                                                                             | Null          |
| `camunda.data.primary-storage.backup.gcs.host`        | <p>When set, this overrides the host that the GCS client connects to.</p><p>By default, this is not set because the client can automatically discover the correct host to connect to.</p>                                                                                                                                                                                                                                                                                                 | `AUTO`        |
| `camunda.data.primary-storage.backup.gcs.auth`        | <p>Configures which authentication method is used for connecting to GCS.</p><p>Can be either `'auto'` or `'none'`.</p><ul><li>`'auto'`: The GCS client uses application default credentials which automatically discovers appropriate credentials from the [runtime environment](https://cloud.google.com/docs/authentication/application-default-credentials).</li><li><p>`'none'`: No authentication is attempted which is only applicable for testing with emulated GCS.</p></li></ul> | Null          |

### `camunda.data.primary-storage.backup.azure`

| Property                                                      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Default value |
| :------------------------------------------------------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.backup.azure.endpoint`          | <p>The Azure endpoint to connect to. Required unless a connection string is specified.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Null          |
| `camunda.data.primary-storage.backup.azure.account-name`      | <p>The account name used to authenticate with Azure.</p><p>This can only be used in combination with an account key.</p><p>If account credentials or a connection string are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                           | Null          |
| `camunda.data.primary-storage.backup.azure.account-key`       | <p>The account key that is used to authenticate with Azure.</p><p>This can only be used in combination with an account name.</p><p>If account credentials or a connection string are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                   | Null          |
| `camunda.data.primary-storage.backup.azure.connection-string` | <p>The connection string configures the endpoint, account name and account key all at once.</p><p>Ifa connection string or account credentials are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                                                     | Null          |
| `camunda.data.primary-storage.backup.azure.base-path`         | <p>Defines the container name where backup contents are saved.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Null          |
| `camunda.data.primary-storage.backup.azure.create-container`  | <p>Defines the container name where backup contents are saved.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `true`        |
| `camunda.data.primary-storage.backup.azure.sas-token.type`    | <p>This setting defines the SAS token to use.</p><p>These can be of user delegation, service or account type.</p><p><strong>Note:</strong> As user delegation and service SAS tokens do not support the creation of containers, `createContainer` configuration will be overridden to false if `sasToken` is configured.</p><p>The user must make sure that the container already exists, or it will lead to a runtime error. Refer to [delegate access by using a shared access signature](https://learn.microsoft.com/en-us/rest/api/storageservices/delegate-access-with-shared-access-signature).</p> | Null          |
| `camunda.data.primary-storage.backup.azure.sas-token.value`   | <p>The actual Shared Access Signature (SAS) token value used for authentication.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Null          |

### `camunda.data.primary-storage.backup.filesystem`

| Property                                                   | Description                                                    | Default value |
| :--------------------------------------------------------- | :------------------------------------------------------------- | :------------ |
| `camunda.data.primary-storage.backup.filesystem.base-path` | <p>Set the base path to store all related backup files in.</p> | Null          |

</TabItem>
<TabItem value="env" label="Environment variables">

### `CAMUNDA_DATA_PRIMARYSTORAGE`

| Property                                       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :--------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARYSTORAGE_DIRECTORY`        | <p>Specify the directory in which data is stored.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `data`        |
| `CAMUNDA_DATA_PRIMARYSTORAGE_RUNTIMEDIRECTORY` | <p>Specify the directory in which runtime is stored.</p><ul><li>By default, runtime is stored in `directory` for data.</li><li>If `runtime-directory` is configured, then the configured directory will be used. It will have a subdirectory for each partition to store its runtime.</li><li>There is no need to store the runtime in a persistent storage.</li><li>This configuration allows you to split runtime to another disk to optimize for performance and disk usage.</li></ul><p><strong>Note:</strong> If runtime is on a different disk than the data directory, files must be copied to the data directory while taking the snapshot. This can impact disk i/o or performance during snapshotting.</p> | `''`          |

### `CAMUNDA_DATA_PRIMARYSTORAGE_DISK`

| Property                                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARYSTORAGE_DISK_MONITORINGINTERVAL`    | <p>Sets the interval at which the disk usage is monitored.</p>                                                                                                                                                                                                                                                                                                                                                                       | `1s`          |
| `CAMUNDA_DATA_PRIMARYSTORAGE_DISK_MONITORINGENABLED`     | <p>Configure disk monitoring to prevent getting into a non-recoverable state due to out of disk space.</p><p>If monitoring is enabled, the broker rejects commands and pauses replication when the required `freeSpace` is not available.</p>                                                                                                                                                                                        | `true`        |
| `CAMUNDA_DATA_PRIMARYSTORAGE_DISK_FREESPACE_PROCESSING`  | <p>When the free space available is less than this value, the broker rejects all client commands and pauses processing.</p>                                                                                                                                                                                                                                                                                                          | `2GB`         |
| `CAMUNDA_DATA_PRIMARYSTORAGE_DISK_FREESPACE_REPLICATION` | <p>When the free space available is less than this value, the broker stops receiving replicated events.</p><p>This value must be less than `free-space.processing`.</p><p>It is recommended to configure free space large enough for at least one log segment and one snapshot. This is because a partition needs enough space to take a new snapshot to be able to compact the log segments to make disk space available again.</p> | `1GB`         |

### `CAMUNDA_DATA_PRIMARYSTORAGE_LOGSTREAM`

| Property                                                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Default value |
| :------------------------------------------------------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARYSTORAGE_LOGSTREAM_LOGSEGMENTSIZE`  | <p>The size of data log segment files.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                    | `128MB`       |
| `CAMUNDA_DATA_PRIMARYSTORAGE_LOGSTREAM_LOGINDEXDENSITY` | <p>The density of the log index, which determines how frequently index entries are created in the log.</p><p>This value specifies the number of log entries between each index entry. A lower value increases the number of index entries (improving lookup speed but using more memory), while a higher value reduces the number of index entries (saving memory but potentially slowing lookups).</p><p>Valid values: any positive integer (recommended range: 1-1000).</p> | `100`         |

### `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB`

| Property                                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :---------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_STATISTICSENABLED`           | <p>Enables RocksDB statistics, which will be written to the RocksDB log file.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `false`       |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_ACCESSMETRICS`               | <p>Configures which, if any, RocksDB column family access metrics are exposed. Valid values are `none` (the default), and `fine` which exposes many metrics covering the read, write, delete and iteration latency per partition and column family.</p>                                                                                                                                                                                                                                                                                                                              | `none`        |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_MEMORYLIMIT`                 | <p>Configures the memory limit, which can be used by RocksDB.</p><p>Be aware that this setting only applies to RocksDB, which is used by the Zeebe's state management and that an RocksDB instance is used per partition.</p>                                                                                                                                                                                                                                                                                                                                                        | `512MB`       |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_MAXOPENFILES`                | <p>Configures how many files are kept open by RocksDB. The default is unlimited (-1).</p><p>This is a performance optimization: if you set a value greater than zero, it will keep track and cap the number of open files in the `TableCache`.</p><p>On accessing the files it needs to look them up in the cache.</p><p>You should configure this property if the maximum open files are limited on your system, or if you have thousands of files in your RocksDB state as there is a memory overhead to keeping all of them open, and setting `maxOpenFiles` will bound that.</p> | `-1`          |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_MAXWRITEBUFFERNUMBER`        | <p>Configures the maximum number of simultaneous write buffers/memtables RocksDB will have in memory.</p><p>Normally about 2/3s of the `memoryLimit` is used by the write buffers, and this is shared equally by each write buffers.</p><p>This means the higher `maxWriteBufferNumber` is, the less memory is available for each. This means you will flush less data at once, but may flush more often.</p>                                                                                                                                                                        | `6`           |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_MINWRITEBUFFERNUMBERTOMERGE` | <p>Configures how many write buffers should be full before they are merged and flushed to disk.</p><p>A higher numeric value means you may flush less often, but will flush more data at once.</p><p>A lower numeric value means flushing more often, but flushing less data at once.</p>                                                                                                                                                                                                                                                                                            | `3`           |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_IORATEBYTESPERSECOND`        | <p>Configures a rate limit for write I/O of RocksDB.</p><p>Setting any value less than or equal to 0 will disable this, which is the default setting.</p><p>Setting a rate limit on the write I/O can help achieve more stable performance by avoiding write spikes consuming all available IOPS, leading to more predictable read rates.</p>                                                                                                                                                                                                                                        | `0`           |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_WALDISABLED`                 | <p>Configures if the RocksDB write-ahead-log is used or not.</p><p>By default, every write in RocksDB goes to the active write buffer and the WAL; this helps recover a RocksDB instance should it crash before the write buffer is flushed.</p><p>Zeebe however only recovers from specific point-in-time snapshot, and never from a previously active RocksDB instance, which makes it a good candidate to disable the WAL. WAL is disabled by default as it can improve performance of Zeebe.</p>                                                                                 | `true`        |
| `CAMUNDA_DATA_PRIMARYSTORAGE_ROCKSDB_SSTPARTITIONINGENABLED`      | <p>Configures if the RocksDB SST files should be partitioned based on some virtual column families.</p><p>By default, RocksDB will not partition the SST files, which could influence the compacting of certain key ranges.</p><p>Enabling this option gives RocksDB some good hints how to improve compaction and reduce the write amplification.</p><p>Benchmarks have shown impressive results, allowing sustained performance on larger states.</p><p>This setting will increase the general file count of runtime and snapshots.</p>                                            | `true`        |

### `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP`

| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_STORE` | <p>Set the backup store type.</p><p>Supported values are `NONE`, `S3`, `GCS`, `AZURE`, `FILESYSTEM`.</p><ul><li>`NONE`: No backup store is configured and no backup will be taken.</li><li>`S3`: Use any [Amazon S3 compatible storage](https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html).</li><li>`GCS`: Use [Google Cloud Storage](https://cloud.google.com/storage/).</li><li>`AZURE`: Use [Azure Storage](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction).</li><li>`FILESYSTEM`: Use filesystem storage</li></ul><p><strong>Note:</strong> This configuration applies to the backup of primary storage.</p> | `NONE` |

### `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3`

| Property                                                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                          | Default value |
| :-------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_BUCKETNAME`                   | <p>Name of the bucket where the backup will be stored.</p><ul><li>The bucket must be already created.</li><li>The bucket must not be shared with other zeebe clusters.</li><li>The `bucketName` must not be empty.</li></ul>                                                                                                                                                                                                                         | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_ENDPOINT`                     | <p>Configure the URL endpoint for the store. If no endpoint is provided, it will be determined based on the configured region.</p>                                                                                                                                                                                                                                                                                                                   | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_REGION`                       | <p>Configure the AWS region.</p><p>If no region is provided it will be determined as documented in [setting the AWS Region for the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html#automatically-determine-the-aws-region-from-the-environment).</p>                                                                                                                                     | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_ACCESSKEY`                    | <p>Configure access credentials.</p><p>If either `accessKey` or `secretKey` is not provided, the credentials will be determined as documented in [using credentials providers in the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html#credentials-chain").</p>                                                                                                                                 | -             |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_SECRETKEY`                    | <p>Configure access credentials.</p><p>If either `accessKey` or `secretKey` is not provided, the credentials will be determined as documented in [using credentials providers in the AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials.html#credentials-chain").</p>                                                                                                                                 | -             |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_APICALLTIMEOUT`               | <p>Configure a maximum duration for all S3 client API calls.</p><p>Lower values will ensure that failed or slow API calls don't block other backups but may increase the risk that backups can't be stored if uploading parts of the backup takes longer than the configured timeout.</p><p>Refer to [AWS Java SDK 2.x Best Practices](https://github.com/aws/aws-sdk-java-v2/blob/master/docs/BestPractices.md#utilize-timeout-configurations).</p> | `180s`        |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_FORCEPATHSTYLEACCESS`         | <p>If enabled, forces the s3 client to use path-style access.</p><p>By default, the client will automatically choose between path-style and virtual-hosted-style.</p><p>This should only be enabled if the s3 compatible storage cannot support virtual-hosted-style.</p><p>Refer to [accessing an Amazon S3 general purpose bucket](https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-bucket-intro.html).</p>                            | `false`       |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_COMPRESSION`                  | <p>When set to an algorithm such as `'zstd'`, enables compression of backup contents.</p><p>When not set or set to `'none'`, backup content is not compressed.</p><p>Enabling compression reduces the required storage space for backups in S3 but also increases the impact on CPU and disk utilization while taking a backup.</p>                                                                                                                  | -             |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_MAXCONCURRENTCONNECTIONS`     | <p>Maximum number of connections allowed in a connection pool.</p><p>This is used to restrict the maximum number of concurrent uploads as to avoid connection timeouts when uploading backups with large/multiple files.</p>                                                                                                                                                                                                                         | `50`          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_CONNECTIONACQUISITIONTIMEOUT` | <p>Timeout for acquiring an already-established connection from a connection pool to a remote service.</p>                                                                                                                                                                                                                                                                                                                                           | `45s`         |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_BASEPATH`                     | <p>When set, all objects in the bucket will use this prefix. Must be non-empty and not start or end with '`/`'.</p><p>This is useful for using the same bucket for multiple Zeebe clusters. In this scenario, the `basePath` must be unique.</p>                                                                                                                                                                                                     | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_S3_SUPPORTLEGACYMD5`             | <p>Enable s3 md5 plugin for legacy support.</p>                                                                                                                                                                                                                                                                                                                                                                                                      | Null          |

### `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_GCS`

| Property                                             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Default value |
| :--------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_GCS_BUCKETNAME` | <p>Name of the bucket where the backup will be stored.</p><ul><li>The bucket must already exist.</li><li>The bucket must not be shared with other Zeebe clusters unless `basePath` is also set.</li></ul>                                                                                                                                                                                                                                                                                 | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_GCS_HOST`       | <p>When set, this overrides the host that the GCS client connects to.</p><p>By default, this is not set because the client can automatically discover the correct host to connect to.</p>                                                                                                                                                                                                                                                                                                 | `AUTO`        |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_GCS_ENDPOINT`   | <p>When set, all blobs in the bucket will use this prefix. This is useful for using the same bucket for multiple Zeebe clusters.</p><p>In this scenario, the `basePath` must be unique. It should not start or end with a '`/`' character. It must be non-empty and not consist of only '`/`' characters.</p>                                                                                                                                                                             | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_GCS_AUTH`       | <p>Configures which authentication method is used for connecting to GCS.</p><p>Can be either `'auto'` or `'none'`.</p><ul><li>`'auto'`: The GCS client uses application default credentials which automatically discovers appropriate credentials from the [runtime environment](https://cloud.google.com/docs/authentication/application-default-credentials).</li><li><p>`'none'`: No authentication is attempted which is only applicable for testing with emulated GCS.</p></li></ul> | Null          |

### `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE`

| Property                                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Default value |
| :----------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_ENDPOINT`         | <p>The Azure endpoint to connect to. Required unless a connection string is specified.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_ACCOUNTNAME`      | <p>The account name used to authenticate with Azure.</p><p>This can only be used in combination with an account key.</p><p>If account credentials or a connection string are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                           | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_ACCOUNTKEY`       | <p>The account key that is used to authenticate with Azure.</p><p>This can only be used in combination with an account name.</p><p>If account credentials or a connection string are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                   | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_CONNECTIONSTRING` | <p>The connection string configures the endpoint, account name and account key all at once.</p><p>Ifa connection string or account credentials are not provided, authentication will use credentials from the [runtime environment](https://learn.microsoft.com/en-us/java/api/com.azure.identity.defaultazurecredential?view=azure-java-stable).</p>                                                                                                                                                                                                                                                     | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_BASEPATH`         | <p>Defines the container name where backup contents are saved.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_CREATECONTAINER`  | <p>Defines the container name where backup contents are saved.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `true`        |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_SASTOKEN_TYPE`    | <p>This setting defines the SAS token to use.</p><p>These can be of user delegation, service or account type.</p><p><strong>Note:</strong> As user delegation and service SAS tokens do not support the creation of containers, `createContainer` configuration will be overridden to false if `sasToken` is configured.</p><p>The user must make sure that the container already exists, or it will lead to a runtime error. Refer to [delegate access by using a shared access signature](https://learn.microsoft.com/en-us/rest/api/storageservices/delegate-access-with-shared-access-signature).</p> | Null          |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_AZURE_SASTOKEN_VALUE`   | <p>The actual Shared Access Signature (SAS) token value used for authentication.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Null          |

### `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_FILESYSTEM`

| Property                                                  | Description                                                    | Default value |
| :-------------------------------------------------------- | :------------------------------------------------------------- | :------------ |
| `CAMUNDA_DATA_PRIMARY_STORAGE_BACKUP_FILESYSTEM_BASEPATH` | <p>Set the base path to store all related backup files in.</p> | Null          |

  </TabItem>
</Tabs>
