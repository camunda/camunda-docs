---
id: a2a-client
title: A2A Client
sidebar_label: A2A Client
description: "Enables interaction with remote agents using the Agent-to-Agent (A2A) protocol."
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

The Agent-to-Agent (A2A) Client connectors enable Camunda processes to interact with remote agents using the [A2A protocol](https://a2a-protocol.org/v0.3.0/specification/).
These connectors combined with the [AI agent connector](../../../connectors/out-of-the-box-connectors/agentic-ai-aiagent.md) allow multi-agent collaboration scenarios.
This suite of connectors provides comprehensive capabilities for discovering remote agents, sending messages to them, and receiving responses through various mechanisms.

The A2A Client connectors consist of three main components:

1. **A2A Client Connector (Outbound)** - Retrieves remote agents' _Agent Card_ and sends messages to them
2. **A2A Client Polling Connector (Inbound)** - Polls for responses from remote A2A agents
3. **A2A Client Webhook Connector (Inbound)** - Receives responses from remote A2A agents via webhooks

These connectors work together to enable seamless integration with A2A-compliant agents, allowing you to build multi-agent workflows within Camunda processes.

<Tabs groupId="a2a" defaultValue="outbound" queryString values={
[
{label: 'A2A Client', value: 'outbound' },
{label: 'A2A Client Polling', value: 'polling' },
{label: 'A2A Client Webhook', value: 'webhook' }
]}>

<TabItem value='outbound'>

The **A2A Client connector** is used to interact with A2A agents. It performs two main actions: retrieving the _Agent Card_ of a remote agent and sending messages to that agent.

## Prerequisites

To use the **A2A Client connector**, you need to have access to an A2A-compliant agent and its corresponding Agent Card URL.

## Create an A2A Client connector task

import ConnectorTask from '../../../react-components/connector-task.md'

<ConnectorTask/>

## Make your A2A Client connector executable

To make the **A2A Client connector** executable, fill out the mandatory fields highlighted in red in the properties panel on the right side of the screen.

The **A2A Client connector** supports two distinct operational modes to accommodate different use cases: **standalone mode** and **AI Agent tool mode**.

### 1. Standalone mode

In standalone mode, the connector is used directly in a BPMN process as a service task. You explicitly configure the operation to perform and all associated parameters.

The connector requires the following configuration:

- HTTP Connection
  - **A2A server URL** (required): The base URL of the A2A server
    - Example: `http://localhost:10000`
  - **Agent card location** (optional): Path to the agent card endpoint relative to the base URL
    - Default: `.well-known/agent-card.json`
- Connector Mode
  - Select "Standalone"
- Operation: when in standalone mode, you can choose between two operations:
  1. **Fetch Agent Card**
  2. **Send Message**

#### Fetch Agent Card

Retrieves the [Agent Card](https://a2a-protocol.org/v0.3.0/specification/#5-agent-discovery-the-agent-card) from the remote A2A server, which describes the agent's capabilities, skills, etc.

**Configuration:** No additional parameters are required.

**Response:**
Returns a JSON object containing the most relevant Agent Card details. Here is an example of the returned JSON:

```json
{
  "result": {
    "name": "Weather agent",
    "description": "Helps with weather information",
    "skills": [
      {
        "id": "weather-forecast",
        "name": "Weather Forecast",
        "description": "Get weather forecast information",
        "tags": ["forecast", "weather"],
        "examples": [
          "What's the weather like today in Berlin?",
          "Will it rain tomorrow in London?"
        ],
        "inputModes": ["text"],
        "outputModes": ["text"]
      }
    ],
    "kind": "agentCard"
  },
  "pollingData": {
    "id": "20be510a-9e12-40c2-ad4d-899ded442db3"
  }
}
```

Learn more about the response structure [here](#response-structure)

#### Send message

Sends a message to the remote agent and handles the response based on the configured retrieval method.

**Configuration:**

- **Text** (required): The message to send to the remote agent
- **Context ID** (optional): The context ID for grouping related interactions
  - Typically generated by the remote server; omit for first message or new context
- **Task ID** (optional): The ID of the task this message is part of
  - Generated by the remote server; omit if not part of a specific task
- **Reference Task IDs** (optional): List of task IDs that this message references for context
  - FEEL expression; for example: `= ["e240a538-a857-4e88-b3d0-4ddaf4882cc6", "eb086e57-43e3-45c1-a944-9a23a8b823df"]`
- **Documents** (optional): List of [Camunda document references](/components/document-handling/getting-started.md#) to include with the message. This supports the same document types as the [AI Agent connector](../../../connectors/out-of-the-box-connectors/agentic-ai-aiagent-subprocess.md#supported-document-types).
- **Response retrieval** (required): How to receive the final response from the remote agent
  - **Blocking**: Waits synchronously for the agent's response
  - **Polling**: Returns immediately with a task with `submitted` or `working` state; use the A2A Client Polling Connector to retrieve results
  - **Notification**: Configures a webhook for the remote agent to push notifications about the task status updates; use the A2A Client Webhook Connector to receive notifications
    - **Webhook URL** (required): URL where the agent will send the response. See [A2A Client Webhook Connector](./?a2a=webhook) for how to set up a webhook endpoint.
    - **Token** (optional): Unique token for validating notifications. It can be a static value or generated using a FEEL expression.
      - For a random token, you can use the FEEL expression `= uuid()`
    - **Authentication schemes** (optional): List of auth schemes required by the webhook
    - **Authentication credentials** (optional): Credentials to authenticate webhook requests
- **History length** (optional): Number of most recent messages from task history to include in response
  - Default: `3`
- **Response timeout** (optional): Maximum time to wait for (the first) response as ISO-8601 duration
  - Default: `PT1M` (1 minute)

**Response:** Returns a JSON object containing the remote agent's response.

Here is an example of the resulting JSON when the remote agent replies with a [Message](https://a2a-protocol.org/v0.3.0/specification/#64-message-object):

```json
{
  "result": {
    "kind": "message",
    "role": "agent",
    "messageId": "202dc848-05d7-4aff-a147-45ba42c765b1",
    "contextId": "5b70baac-065e-4680-ace9-81289e67f51d",
    "contents": [
      {
        "type": "text",
        "text": "Based on the weather forecast, it looks like it will be sunny in Berlin today with a high of 25°C and a low of 15°C."
      }
    ]
  }
}
```

Here is an example of the resulting JSON when the remote agent replies with a [Task](https://a2a-protocol.org/v0.3.0/specification/#61-task-object) in the `submitted` state:

```json
{
  "result": {
    "kind": "task",
    "id": "1f184812-0926-4f2c-881c-65c158a6dd11",
    "contextId": "8802db7b-8401-46b0-89f8-1ec3d5e81194",
    "status": {
      "state": "submitted",
      "message": {
        "kind": "message",
        "role": "agent",
        "messageId": "3fc30325-d5d2-4d7a-a472-e197fb478acc",
        "contextId": "8802db7b-8401-46b0-89f8-1ec3d5e81194",
        "taskId": "1f184812-0926-4f2c-881c-65c158a6dd11",
        "contents": [
          {
            "type": "text",
            "text": "Your weather forecast request has been submitted and is being processed. I'm gathering data from multiple weather stations and satellite imagery for your location."
          }
        ]
      },
      "timestamp": "2025-11-27T15:45:47.542Z"
    },
    "history": [
      {
        "kind": "message",
        "role": "user",
        "messageId": "a35df285-783d-4ad7-87b9-16a0bbff7f30",
        "contextId": "8802db7b-8401-46b0-89f8-1ec3d5e81194",
        "taskId": "1f184812-0926-4f2c-881c-65c158a6dd11",
        "contents": [
          {
            "type": "text",
            "text": "Please provide a 7-day weather forecast for San Francisco, CA including temperature, precipitation, and wind conditions."
          }
        ]
      }
    ]
  },
  "pollingData": {
    "id": "1f184812-0926-4f2c-881c-65c158a6dd11"
  }
}
```

:::info
In this sample response `pollingData` contains the task identifier that is used internally by the **A2A Client Polling connector**.
We assume **Response retrieval** is **Polling**.
:::

### 2. AI Agent tool mode

In AI Agent tool mode, the connector is registered as a tool that can be dynamically invoked by the [AI agent connector](../../../connectors/out-of-the-box-connectors/agentic-ai-aiagent.md).
This enables the AI agent to discover and interact with remote A2A agents autonomously based on user requests.

The connector requires the following configuration:

- HTTP Connection
  - Same as in Standalone mode
- Connector Mode
  - Select "AI Agent tool"
- Operation: In AI Agent tool mode, the operation is dynamically determined by the AI agent:
  - **Operation** (required): Automatically populated from `toolCall.operation`
    - Possible values: `fetchAgentCard`, `sendMessage`
  - **Parameters** (optional): Automatically populated from `toolCall.params`
    - Contains the dynamic parameters for the `sendMessage` operation
  - **Response retrieval** (required): Same as in Standalone mode
  - **History length** (optional): Same as in Standalone mode
  - **Response timeout** (optional): Same as in Standalone mode

**How it works:**

1. The AI Agent connector detects this connector as an available tool.
2. The AI agent perform a tool discovery using the `fetchAgentCard` operation.
3. When the AI agent determines it needs to interact with the A2A agent, it issues a tool call containing the required parameters.
4. The tool call is translated into a `sendMessage` operation.
5. The connector executes the `sendMessage` operation.
6. Results are returned to the AI agent.
7. If needed, the AI agent engages in a multi-turn conversation with the A2A agent by issuing further tool calls referring to the same context and task IDs. This happens when the remote agent asks for further information.
8. If needed, the AI agent can start new interactions with the A2A agent by issuing new tool calls without context and task IDs.

## Response structure

The response from the **A2A Client connector** is a JSON object with the following fields:

- **result**: Contains the actual response from the remote agent. This can contain either an _Agent Card_, a _message_, or a _task_ object depending on the operation performed.
- **pollingData**: Contains data required internally for polling the task status when using the **Polling** response retrieval method.
- **notificationData**: Contains data required internally when using the **Notification** response retrieval method.

</TabItem>

<TabItem value='polling'>

The **A2A Client Polling connector** is used to poll for responses from asynchronous A2A tasks. It is typically paired with the **A2A Client connector** when using the **Polling** response retrieval method.

## Create an A2A Client Polling connector task

1. Start building your BPMN diagram. You can use the **A2A Client Polling connector** with an **Intermediate Catch Event** or with a **Receive Task**.
2. Select the applicable element and change its template to a **A2A Client Polling connector**.
3. Fill in all required properties.
4. Complete your BPMN diagram.
5. Deploy the diagram to activate the **A2A Client Polling connector**.

## Make your A2A Client Polling connector executable

To make the **A2A Client Polling connector** executable, fill out the mandatory fields highlighted in red in the properties panel on the right side of the screen.

The **A2A Client Polling connector** requires the following configuration:

- Connection: Values should match those used in the **A2A Client connector**
  - **A2A server URL** (required): The base URL of the A2A server
  - **Agent card location** (optional): Path to the agent card endpoint

- Client Response
  - **A2A Client Response** (required): FEEL expression referencing the response from the **A2A Client connector**

- Options
  - **History length** (optional): Number of messages to return as part of the history when polling
    - Default: `3`

- Polling
  - **Task polling interval** (optional): Delay between polling requests as ISO-8601 duration
    - Default: `PT10S` (10 seconds)

- Activation
  - **Activation condition**: FEEL expression to determine if the polled data meet the criteria to activate the intermediate catch event
    - In most cases the default value is sufficient. The default expression checks if the polled task is in a final state.

- Correlation
  - **Message ID expression** (optional): Allows you to extract the message ID from the incoming request. The message ID serves as a unique identifier for the message and is used for message correlation.
    This expression is evaluated in the connector Runtime and the result is used to correlate the message. - In most cases, it is not necessary to configure the **Message ID expression**. However, it is useful if you want to ensure message deduplication or achieve a certain message correlation behavior.
    Learn more about how message IDs influence message correlation in the [messages guide](../../../concepts/messages#message-correlation-overview).
  - **Message TTL** (optional): Allows you to set the time-to-live (TTL) for the correlated messages. TTL defines the time for which the message is buffered in Zeebe before being correlated to the process instance (if it can't be correlated immediately).
    The value is specified as an ISO 8601 duration. For example, `PT1H` sets the TTL to one hour. Learn more about the TTL concept in Zeebe in the [message correlation guide](../../../concepts/messages#message-buffering).

    :::info
    **Correlation key (process)** and **Correlation key (payload)** are pre-filled with the required values. They are hidden since there is no need to modify them.
    :::

- Output mapping
  - **Result variable** (optional): You can typically leave empty
  - **Result expression**: FEEL expression to extract the result from the polled response
    - Typically, we need to extract the `result` field from the [response](./?a2a=outbound#response-structure) using a FEEL expression like `= {a2aAgetntResponse: result}` or `= {toolCallResult: result}`

</TabItem>

<TabItem value='webhook'>

The **A2A Client Webhook connector** receives callbacks from remote A2A agents via HTTP webhooks. This is used when the **A2A Client connector** is configured with the **Notification** response retrieval method.
This connector is based on the [HTTP Webhook connector](../../../connectors/protocol/http-webhook.md) and shares most of its configuration options.

## Create an A2A Client Webhook connector task

1. Start building your BPMN diagram. You can use the **A2A Client Webhook connector** with an **Intermediate Catch Event** or with a **Receive Task**.
2. Select the applicable element and change its template to a **A2A Client Webhook connector**.
3. Fill in all required properties.
4. Complete your BPMN diagram.
5. Deploy the diagram to activate the **A2A Client Webhook connector**.
6. Navigate to the **Webhooks** tab in the properties panel to see the webhook URL.

:::warning
The webhook URL obtained in step 6 should be used in the **A2A Client connector** configuration. After this step you need to redeploy your BPMN diagram.
Currently, there is no automatic way to inject the webhook URL into the **A2A Client connector** configuration.
:::

:::info
In a Camunda 8 Self-Managed environment you need to construct the Webhook URL manually. See the [HTTP Webhook connector documentation](../../../connectors/protocol/http-webhook.md#activate-the-http-webhook-connector-by-deploying-your-diagram) for more information.
:::

## Make your A2A Client Webhook connector executable

To make the **A2A Client Webhook connector** executable, fill out the mandatory fields highlighted in red in the properties panel on the right side of the screen.

The **A2A Client Webhook connector** requires the following configuration:

- Webhook ID
  - **Webhook ID** (required): Unique identifier for the webhook endpoint. This ID will be part of the webhook URL.

- Client Response
  - **A2A Client Response** (required): FEEL expression referencing the response from the **A2A Client connector**

- Authentication
  - See the [HTTP Webhook connector documentation](../../../connectors/protocol/http-webhook.md) for more information.
- Authorization
  - See the [HTTP Webhook connector documentation](../../../connectors/protocol/http-webhook.md) for more information.
- Activation
  - **Activation condition**: FEEL expression to determine if the payload meet the criteria to activate the intermediate catch event
    - In most cases the default value is sufficient. The default expression checks if the received task is in a final state.

- Correlation
  - **Message ID expression** (optional): Allows you to extract the message ID from the incoming request. The message ID serves as a unique identifier for the message and is used for message correlation.
    This expression is evaluated in the connector Runtime and the result is used to correlate the message.
    - In most cases, it is not necessary to configure the **Message ID expression**. However, it is useful if you want to ensure message deduplication or achieve a certain message correlation behavior.
      Learn more about how message IDs influence message correlation in the [messages guide](../../../concepts/messages#message-correlation-overview).
  - **Message TTL** (optional): Allows you to set the time-to-live (TTL) for the correlated messages. TTL defines the time for which the message is buffered in Zeebe before being correlated to the process instance (if it can't be correlated immediately).
    The value is specified as an ISO 8601 duration. For example, `PT1H` sets the TTL to one hour. Learn more about the TTL concept in Zeebe in the [message correlation guide](../../../concepts/messages#message-buffering).

    :::info
    **Correlation key (process)** and **Correlation key (payload)** are pre-filled with the required values. They are hidden since there is no need to modify them.
    :::

- Output mapping
  - **Result variable** (optional): You can typically leave empty
  - **Result expression**: FEEL expression to extract the result from the payload
    - Typically, we need to extract the `request.body` field using a FEEL expression like `= {a2aAgetntResponse: request.body}` or `= {toolCallResult: request.body}`

:::tip
As in the **HTTP Webhook connector**, the payload is accessible via the `request` variable. Use the following references to access data:

- Body: `request.body.`.
- Headers: `request.headers.`.
- URL parameters: `request.params.`.
  :::

</TabItem>

</Tabs>
